# ==============================================
# IBKR Configuration
# ==============================================
# Host where TWS or IB Gateway is running
IBKR_HOST=127.0.0.1

# Port configuration:
# IB Gateway Paper: 4002
# IB Gateway Live: 4001
IBKR_PORT=4002

# Unique client ID (1-32)
IBKR_CLIENT_ID=1

# Your IBKR account number (e.g., DU123456 for paper, U123456 for live)
IBKR_ACCOUNT=DU123456  # Your account number

# IBKR Credentials for Docker IB Gateway
IBKR_USERNAME=your_ibkr_username
IBKR_PASSWORD=your_ibkr_password
TRADING_MODE=paper  # paper or live
VNC_PASSWORD=password  # For VNC access to IB Gateway container

# ==============================================
# AI API Keys
# ==============================================
GEMINI_API_KEY=your_gemini_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# ==============================================
# Telegram Notifications (Optional)
# ==============================================
# Get bot token from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=

# Get chat ID by messaging bot and visiting:
# https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
TELEGRAM_CHAT_ID=

# ==============================================
# Trading Parameters
# ==============================================
# Note: Account balance will be fetched from IBKR API at runtime

# Maximum risk per single trade in USD
MAX_RISK_PER_TRADE=120

# Maximum allocation percentage of account per trade (0-100)
MAX_ALLOCATION_PERCENT=25

# ==============================================
# Pipeline Configuration
# ==============================================
# News API (https://newsapi.org - 100 free requests/day)
NEWS_API_KEY=
NEWS_LOOKBACK_DAYS=7

# Stock screening
PHASE1_MAX_CANDIDATES=10
PHASE2_TOP_PICKS=3

# Risk-Free Rate (US Treasury Yield)
# Default: 4.5% (will be fetched dynamically from IBKR if available)
# Update this periodically if IBKR fetch fails
RISK_FREE_RATE=0.045

# ==============================================
# Scheduler Configuration
# ==============================================
# Run premarket scan automatically? (true/false)
AUTO_PREMARKET_SCAN=true

# Premarket scan time (format: HH:MM)
PREMARKET_SCAN_TIME=08:45

# Full analysis time (format: HH:MM)  
ANALYSIS_TIME=09:00

# Max premarket candidates to scan
PREMARKET_MAX_CANDIDATES=15

# ==============================================
# VIX Regime Thresholds
# ==============================================
VIX_PANIC_THRESHOLD=30
VIX_HIGH_THRESHOLD=20
VIX_NORMAL_THRESHOLD=15

# ==============================================
# Greeks Validation Thresholds
# ==============================================
# Credit Spreads
CREDIT_SPREAD_MIN_DELTA=0.15
CREDIT_SPREAD_MAX_DELTA=0.25

# Debit Spreads
DEBIT_SPREAD_MIN_DELTA=0.60
DEBIT_SPREAD_MAX_DELTA=0.75

# Minimum daily Theta for credit strategies
MIN_THETA_DAILY=1.00

# Vanna risk - max acceptable Delta change per 5 IV points
MAX_VANNA_DELTA_EXPANSION=0.15

# ==============================================
# Liquidity Thresholds
# ==============================================
# Maximum Bid/Ask spread in dollars
MAX_BID_ASK_SPREAD=0.05

# Minimum Volume to Open Interest ratio (%)
MIN_VOLUME_OI_RATIO=10

# ==============================================
# Exit Strategy Parameters - ML/AI Enhanced
# ==============================================
# Static fallback values (used when ML model not available)
TAKE_PROFIT_PERCENT=50
STOP_LOSS_MULTIPLIER=2.5

# ML Exit Strategy
USE_ML_EXITS=true
ML_CONFIDENCE_THRESHOLD=0.6

# Trailing Take Profit (TTP)
TRAILING_PROFIT_ENABLED=true
MIN_PROFIT_TARGET=0.4
MAX_PROFIT_TARGET=0.7

# Trailing Stop Loss (TSL)
TRAILING_STOP_ENABLED=true
MIN_STOP_MULTIPLIER=1.5
MAX_STOP_MULTIPLIER=3.5

# AI Override (for large P/L moves)
AI_EXIT_ANALYSIS=true
AI_EXIT_PNL_THRESHOLD=0.3

# ==============================================
# Safety Parameters
# ==============================================
# Minimum hours before earnings to avoid new trades
EARNINGS_BLACKOUT_HOURS=48

# Enable paper trading mode (true/false)
PAPER_TRADING=true

# Enable automatic trade execution (true/false)
AUTO_EXECUTE=false

# ==============================================
# Logging Configuration
# ==============================================
LOG_LEVEL=INFO
LOG_ROTATION=100 MB
LOG_RETENTION=10
